@model DGSappSem2.Models.Staffs.StaffAttendance

@{
    ViewBag.Title = "Scan QR Code";
}

@{
    Layout = null;
}

<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Scan your QR Code here</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6724419004010752",
            enable_page_level_ads: true
        });
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-131906273-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-131906273-1');
    </script>
</head>

<body background="~/Content/t1.png">
    @using (Html.BeginForm())
    {
        <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>


        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-3">
                    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                    <!-- demo left sidebar -->
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-6724419004010752"
                         data-ad-slot="7706376079"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                    <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>

                <div class="col">
                    <script src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
                    <div class="w3-container w3-center">
                        <h1 style="color:blueviolet;">Scan your QR Code here</h1>
                        <label class="radio-inline">
                            <strong> Clock In </strong>@Html.RadioButtonFor(type => type.Staffrecord, "Clock In")
                        </label>
                        <label class="radio-inline">
                            <strong> Clock Out</strong> @Html.RadioButtonFor(type => type.Staffrecord, "Clock Out")
                        </label>
                    </div>
                    <div class="col-sm-12">
                        <video id="preview" class="p-1 border" style="width:100%;"></video>
                    </div>
                    <script type="text/javascript">
                    var scanner = new Instascan.Scanner({ video: document.getElementById('preview'), scanPeriod: 5, mirror: false });
                    scanner.addListener('scan', function (content) {
                        alert(content);
                        //window.location.href=content;
                    });
                    Instascan.Camera.getCameras().then(function (cameras) {
                        if (cameras.length > 0) {
                            scanner.start(cameras[0]);
                            $('[name="options"]').on('change', function () {
                                if ($(this).val() == 1) {
                                    if (cameras[0] != "") {
                                        scanner.start(cameras[0]);
                                    } else {
                                        alert('No Front camera found!');
                                    }
                                } else if ($(this).val() == 2) {
                                    if (cameras[1] != "") {
                                        scanner.start(cameras[1]);
                                    } else {
                                        alert('No Back camera found!');
                                    }
                                }
                            });
                        } else {
                            console.error('No cameras found.');
                            alert('No cameras found.');
                        }
                    }).catch(function (e) {
                        console.error(e);
                        alert(e);
                    });
                    </script>
                    <div class="w3-container w3-center">
                        <div class="btn-group btn-group-toggle mb-5" data-toggle="buttons">
                            <label class="btn btn-primary active">
                                <input type="radio" name="options" value="1" autocomplete="off" checked> Front Camera
                            </label>
                            <label class="btn btn-secondary">
                                <input type="radio" name="options" value="2" autocomplete="off"> Back Camera
                            </label>


                        </div>
                    </div>

                    <div class="w3-container w3-center">

                        <input type="submit" value="Submit" class="w3-button w3-black" style="width:33.3%" />
                    </div>


                </div>


                <div class="col-sm-3">
                    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                    <!-- demo left sidebar -->
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-6724419004010752"
                         data-ad-slot="7706376079"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                    <script>
                        (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>

            </div>
        </div>
    }
</body>
</html>
<div> @Html.ActionLink("Return to records", "Index")</div>